<openerp>
	<data>
		<!-- Request Type views -->
		<record id="ems_request_type_form" model="ir.ui.view">
			<field name="name">ems.request.type.form</field>
			<field name="model">ems.request.type</field>
			<field name="arch" type="xml">
				<form string="Request Type">
					<sheet>				
						<group string="Request Type" col="4">
							<field name="name" required="1"/>
							<field name="report_id" required="1" options="{'no_open':1, 'no_create':1}"/>
							<field name="type"/>
							<field name="attachment_type"/>
							<field name="is_grade"/>
							<field name="grades_with_average"/>
						</group>
						<group colspan="4">
							<field name="declaration_text" placeholder="Declaration text...."/>
						</group>						
					</sheet>
				</form>
			</field>
		</record>

		<record id="ems_request_type_tree" model="ir.ui.view">
			<field name="name">ems.request.type.tree</field>
			<field name="model">ems.request.type</field>
			<field name="arch" type="xml">
				<tree string="Request Type">
					<field name="name"/>
					<field name="type"/>
				</tree>
			</field>
		</record>

		<record id="ems_request_type_action" model="ir.actions.act_window">
			<field name="name">Request Type</field>
			<field name="res_model">ems.request.type</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<!-- Request Semester views -->
		<record id="ems_request_semester_form" model="ir.ui.view">
			<field name="name">ems.request.semester.form</field>
			<field name="model">ems.request.semester</field>
			<field name="arch" type="xml">
				<form string="Request Semester">
					<sheet>				
						<group string="Request Semester" col="4">
							<field name="name" required="1"/>
							<field name="semester"/>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="ems_request_semester_tree" model="ir.ui.view">
			<field name="name">ems.request.semester.tree</field>
			<field name="model">ems.request.semester</field>
			<field name="arch" type="xml">
				<tree string="Request Semester">
					<field name="name"/>
					<field name="semester"/>
				</tree>
			</field>
		</record>

		<record id="ems_request_semester_action" model="ir.actions.act_window">
			<field name="name">Request Semester</field>
			<field name="res_model">ems.request.semester</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<!-- END -->
		
		<!-- EMS Request views -->
		<record id="ems_request_form" model="ir.ui.view">
			<field name="name">ems.request.form</field>
			<field name="model">ems.request</field>
			<field name="arch" type="xml">
				<form string="Request">
					<header>
						<button name="action_validate" type="object" string="Process" states="draft,pending" class="oe_highlight" groups="emsprime_core.group_ems_back_office_admin,emsprime_core.group_ems_back_office"/>
						<button name="action_pending" type="object" string="Pending" states="draft" groups="emsprime_core.group_ems_back_office_admin,emsprime_core.group_ems_back_office"/>
						<button name="action_print" type="object" string="Print" states="validate" class="oe_highlight" groups="emsprime_core.group_ems_back_office_admin,emsprime_core.group_ems_back_office"/>
						<button name="action_deliver" type="object" string="Deliver" states="validate" class="oe_highlight" groups="emsprime_core.group_ems_back_office_admin,emsprime_core.group_ems_back_office"/>
						<button name="action_draft" type="object" string="Set to Draft" states="done" class="oe_highlight" groups="emsprime_core.group_ems_back_office_admin,emsprime_core.group_ems_back_office"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,validate,done" statusbar_colors='{"pending":"red","validate":"green"}'/>
					</header>
					<sheet>
		                <!--<div class="oe_title">
		                    <label for="name" class="oe_edit_only"/>
		                    <h1><field name="name" placeholder="Describe the Request..."/></h1>
		                </div>-->
						<group colspan="4">
							<field name="sequence" attrs="{'invisible':[('state','not in',('validate','done'))]}"/>
							<field name="request_type_id" options="{'no_create':1, 'no_open':1}" required="1"/>
							<field name="regime"/>
							<field name="enrollment_id" domain="[('type','=','M')]" attrs="{'invisible':[('report_type','not in',('S'))]}"/>
							<field name="faculty_id" attrs="{'invisible':[('report_type','not in',('F'))]}"/>
							<field name="name" placeholder="Applicant..."/>
							<field name="semester_ids" widget="many2many_tags" attrs="{'invisible':[('report_type_grade','!=',(True))]}"/>
							<!--<field name="course_year" attrs="{'invisible':[('report_type_grade','!=',(True))]}"/>-->
							<field name="date"/>
							<field name="report_type_grade" invisible="1"/>
							<field name="report_type" invisible="1"/>
						</group>
						<group colspan="4">
							<field name="report_signature"/>
							<field name="description" placeholder="Other Info...."/>
						</group>
					</sheet>
		            <div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
		                <field name="message_ids" widget="mail_thread"/>
		            </div>
				</form>
			</field>
		</record>

		<record id="ems_request_tree" model="ir.ui.view">
			<field name="name">ems.request.tree</field>
			<field name="model">ems.request</field>
			<field name="arch" type="xml">
				<tree string="Request">
					<field name="name"/>
					<field name="request_type_id"/>
					<field name="regime"/>
					<field name="student_faculty"/>
					<field name="date"/>
					<field name="sequence"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

        <record id="view_ems_request_search" model="ir.ui.view">
            <field name="name">ems.request.search</field>
            <field name="model">ems.request</field>
            <field name="priority" eval="8" />
            <field name="arch" type="xml">
                <search string="Request">
                    <field name="student_faculty" />
                    <field name="request_type_id" />
                    <field name="state" />
                    <newline />
                    <group expand="0" string="Group By...">
                        <filter string="University Center" domain="[]" context="{'group_by':'university_center_id'}" />
                        <filter string="Request type" domain="[]" context="{'group_by':'request_type_id'}" />
                        <filter string="State" domain="[]" context="{'group_by':'state'}" />
                        <filter string="Regime" domain="[]" context="{'group_by':'regime'}" />
                    </group>
                </search>
            </field>
        </record>
		
		<record id="ems_request_action" model="ir.actions.act_window">
			<field name="name">Request</field>
			<field name="res_model">ems.request</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,pivot,form</field>
            <field name="search_view_id" ref="view_ems_request_search" />
            <field name="domain">[]</field>
            <field name="context">{}</field>
		</record>
        <record model="ir.actions.act_window.view" id="act_open_ems_request_view_form">
            <field name="act_window_id" ref="ems_request_action" />
            <field name="sequence" eval="20" />
            <field name="view_mode">form</field>
            <field name="view_id" ref="ems_request_form" />
        </record>
        <record model="ir.actions.act_window.view" id="act_open_ems_request_view_tree">
            <field name="act_window_id" ref="ems_request_action" />
            <field name="sequence" eval="10" />
            <field name="view_mode">tree</field>
            <field name="view_id" ref="ems_request_tree" />
        </record>
	</data>
</openerp>
